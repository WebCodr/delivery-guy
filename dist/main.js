"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},asyncToGenerator=function(e){return function(){var s=e.apply(this,arguments);return new Promise(function(i,c){return function t(e,r){try{var n=s[e](r),o=n.value}catch(e){return void c(e)}if(!n.done)return Promise.resolve(o).then(function(e){t("next",e)},function(e){t("throw",e)});i(o)}("next")})}},classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},inherits=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},possibleConstructorReturn=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},isMergeableObject=function(e){return isNonNullObject(e)&&!isSpecial(e)};function isNonNullObject(e){return!!e&&"object"===(void 0===e?"undefined":_typeof(e))}function isSpecial(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||isReactElement(e)}var canUseSymbol="function"==typeof Symbol&&Symbol.for,REACT_ELEMENT_TYPE=canUseSymbol?Symbol.for("react.element"):60103;function isReactElement(e){return e.$$typeof===REACT_ELEMENT_TYPE}function emptyTarget(e){return Array.isArray(e)?[]:{}}function cloneUnlessOtherwiseSpecified(e,t){return!1!==t.clone&&t.isMergeableObject(e)?deepmerge(emptyTarget(e),e,t):e}function defaultArrayMerge(e,t,r){return e.concat(t).map(function(e){return cloneUnlessOtherwiseSpecified(e,r)})}function mergeObject(t,r,n){var o={};return n.isMergeableObject(t)&&Object.keys(t).forEach(function(e){o[e]=cloneUnlessOtherwiseSpecified(t[e],n)}),Object.keys(r).forEach(function(e){n.isMergeableObject(r[e])&&t[e]?o[e]=deepmerge(t[e],r[e],n):o[e]=cloneUnlessOtherwiseSpecified(r[e],n)}),o}function deepmerge(e,t,r){(r=r||{}).arrayMerge=r.arrayMerge||defaultArrayMerge,r.isMergeableObject=r.isMergeableObject||isMergeableObject;var n=Array.isArray(t);return n===Array.isArray(e)?n?r.arrayMerge(e,t,r):mergeObject(e,t,r):cloneUnlessOtherwiseSpecified(t,r)}deepmerge.all=function(e,r){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(e,t){return deepmerge(e,t,r)},{})};var deepmerge_1=deepmerge,interceptors={request:[],response:[],error:[]},intercept=function(e,t){interceptors[e]&&interceptors[e].push(t)},callInterceptorActions=function(e,t,r){var n=interceptors[e]||[];if(0<n.length){var o=!0,i=!1,c=void 0;try{for(var s,u=n[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){(0,s.value)(t,r)}}catch(e){i=!0,c=e}finally{try{!o&&u.return&&u.return()}finally{if(i)throw c}}}},initInterceptors=function(e){e.interceptors=interceptors,e.intercept=intercept,e.callInterceptorActions=callInterceptorActions},createInterceptorPromise=function(t,e){var r=Promise.resolve();return r=(r=(r=r.then(function(){callInterceptorActions("request",t,e)})).then(function(){return fetch(t,e)})).then(function(e){return callInterceptorActions("response",t,e),e})};function DeliveryGuy(){}initInterceptors(DeliveryGuy);var getErrorMessage=function(e){return"The request to "+e.url+" failed with HTTP "+e.status+": "+e.statusText},ResponseError=function(e){function r(e){classCallCheck(this,r);var t=possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,getErrorMessage(e)));return t.response=e,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(t,r),t}return inherits(r,e),r}(Error);Function.prototype.$asyncbind=function e(t,r){function n(){return o.apply(t,arguments)}Function.prototype.$asyncbind||Object.defineProperty(Function.prototype,"$asyncbind",{value:e,enumerable:!1,configurable:!0,writable:!0}),e.trampoline||(e.trampoline=function(r,n,o,i,c){return function e(t){for(;t;){if(t.then)return t=t.then(e,i),c?void 0:t;try{if(t.pop){if(t.length)return t.pop()?n.call(r):t;t=o}else t=t.call(r)}catch(e){return i(e)}}}}),e.LazyThenable||(e.LazyThenable=function(){function o(e){return e&&e instanceof Object&&"function"==typeof e.then}function i(t,e,r){try{var n=r?r(e):e;if(t===n)return t.reject(new TypeError("Promise resolution loop"));o(n)?n.then(function(e){i(t,e)},function(e){t.reject(e)}):t.resolve(n)}catch(e){t.reject(e)}}function e(e){}function c(){}function t(t,r){var n=new c;try{this._resolver(function(e){return o(e)?e.then(t,r):i(n,e,t)},function(e){i(n,e,r)})}catch(e){i(n,e,r)}return n}function r(e){this._resolver=e,this.then=t}return c.prototype={resolve:e,reject:e,then:function(e,t){this.resolve=e,this.reject=t}},r.resolve=function(t){return r.isThenable(t)?t:{then:function(e){return e(t)}}},r.isThenable=o,r}(),e.EagerThenable=e.Thenable=(e.EagerThenableFactory=function(o){o=o||"object"===("undefined"==typeof process?"undefined":_typeof(process))&&process.nextTick||"function"==typeof setImmediate&&setImmediate||function(e){setTimeout(e,0)};var c=function(){var t=[],r=0;function n(){for(;t.length-r;){try{t[r]()}catch(e){}t[r++]=void 0,1024===r&&(t.splice(0,1024),r=0)}}return function(e){t.push(e),t.length-r==1&&o(n)}}();function s(e){if(e){var t=this;e(function(e){t.resolve(e)},function(e){t.reject(e)})}}function i(t,e){if("function"==typeof t.y)try{var r=t.y.call(void 0,e);t.p.resolve(r)}catch(e){t.p.reject(e)}else t.p.resolve(e)}function u(t,e){if("function"==typeof t.n)try{var r=t.n.call(void 0,e);t.p.resolve(r)}catch(e){t.p.reject(e)}else t.p.reject(e)}return s.prototype={resolve:function(r){if(void 0===this.state){if(r===this)return this.reject(new TypeError("Attempt to resolve promise with self"));var n=this;if(r&&("function"==typeof r||"object"===(void 0===r?"undefined":_typeof(r))))try{var t=0,e=r.then;if("function"==typeof e)return void e.call(r,function(e){t++||n.resolve(e)},function(e){t++||n.reject(e)})}catch(e){return void(t||this.reject(e))}this.state=i,this.v=r,n.c&&c(function(){for(var e=0,t=n.c.length;e<t;e++)i(n.c[e],r)})}},reject:function(r){if(void 0===this.state){this.state=u,this.v=r;var n=this.c;n&&c(function(){for(var e=0,t=n.length;e<t;e++)u(n[e],r)})}},then:function(e,t){var r=new s,n={y:e,n:t,p:r};if(void 0===this.state)this.c?this.c.push(n):this.c=[n];else{var o=this.state,i=this.v;c(function(){o(n,i)})}return r}},s.resolve=function(e){if(e&&e instanceof s)return e;var t=new s;return t.resolve(e),t},s.reject=function(e){if(e&&e instanceof s)return e;var t=new s;return t.reject(e),t},s.version="2.3.3-nodent",s})());var o=this;switch(r){case!0:return new e.Thenable(n);case 0:return new e.LazyThenable(n);case void 0:return n.then=n;default:return function(){try{return o.apply(t,arguments)}catch(e){return r(e)}}}};var checkResponse=function(e,t){if(!t.ok)throw DeliveryGuy.callInterceptorActions("error",e,t),new ResponseError(t)},deliver=function(){var r=asyncToGenerator(regeneratorRuntime.mark(function e(t,r){var n,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=createInterceptorPromise(t,r),e.next=3,n;case 3:return o=e.sent,checkResponse(t,o),e.abrupt("return",o);case 6:case"end":return e.stop()}},e,this)}));return function(e,t){return r.apply(this,arguments)}}(),deliverJson=function(){var r=asyncToGenerator(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,deliver(t,r);case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}},e,this)}));return function(e,t){return r.apply(this,arguments)}}(),deliverPostJson=function(){var r=asyncToGenerator(regeneratorRuntime.mark(function e(t,r){var n,o,i,c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"POST",body:JSON.stringify(r),headers:{"content-type":"application/json"}},o=deepmerge_1(c,n),e.next=4,deliver(t,o);case 4:return i=e.sent,e.abrupt("return",i.json());case 6:case"end":return e.stop()}},e,this)}));return function(e,t){return r.apply(this,arguments)}}();exports.DeliveryGuy=DeliveryGuy,exports.deliver=deliver,exports.deliverJson=deliverJson,exports.deliverPostJson=deliverPostJson;
