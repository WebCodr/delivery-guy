"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function asyncGeneratorStep(e,t,r,n,o,i,c){try{var s=e[i](c),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function _asyncToGenerator(s){return function(){var e=this,c=arguments;return new Promise(function(t,r){var n=s.apply(e,c);function o(e){asyncGeneratorStep(n,t,r,o,i,"next",e)}function i(e){asyncGeneratorStep(n,t,r,o,i,"throw",e)}o(void 0)})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function _construct(e,t,r){return(_construct=isNativeReflectConstruct()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&_setPrototypeOf(o,r.prototype),o}).apply(null,arguments)}function _isNativeFunction(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function _wrapNativeSuper(e){var r="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function(e){if(null===e||!_isNativeFunction(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return _construct(e,arguments,_getPrototypeOf(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(t,e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}Object.defineProperty(exports,"__esModule",{value:!0});var isMergeableObject=function(e){return isNonNullObject(e)&&!isSpecial(e)};function isNonNullObject(e){return!!e&&"object"===_typeof(e)}function isSpecial(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||isReactElement(e)}var canUseSymbol="function"==typeof Symbol&&Symbol.for,REACT_ELEMENT_TYPE$1=canUseSymbol?Symbol.for("react.element"):60103;function isReactElement(e){return e.$$typeof===REACT_ELEMENT_TYPE$1}function emptyTarget(e){return Array.isArray(e)?[]:{}}function cloneUnlessOtherwiseSpecified(e,t){return!1!==t.clone&&t.isMergeableObject(e)?deepmerge(emptyTarget(e),e,t):e}function defaultArrayMerge(e,t,r){return e.concat(t).map(function(e){return cloneUnlessOtherwiseSpecified(e,r)})}function mergeObject(t,r,n){var o={};return n.isMergeableObject(t)&&Object.keys(t).forEach(function(e){o[e]=cloneUnlessOtherwiseSpecified(t[e],n)}),Object.keys(r).forEach(function(e){n.isMergeableObject(r[e])&&t[e]?o[e]=deepmerge(t[e],r[e],n):o[e]=cloneUnlessOtherwiseSpecified(r[e],n)}),o}function deepmerge(e,t,r){(r=r||{}).arrayMerge=r.arrayMerge||defaultArrayMerge,r.isMergeableObject=r.isMergeableObject||isMergeableObject;var n=Array.isArray(t);return n===Array.isArray(e)?n?r.arrayMerge(e,t,r):mergeObject(e,t,r):cloneUnlessOtherwiseSpecified(t,r)}deepmerge.all=function(e,r){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(e,t){return deepmerge(e,t,r)},{})};var deepmerge_1=deepmerge,options={globalRequestOptions:{}},getOption=function(e){return options[e]||null},setOption=function(e,t){options[e]=t},initConfig=function(e){e.getOption=getOption,e.setOption=setOption},initRequestOptions=function(n){n.addRequestOption=function(e,t){var r=n.getOption("globalRequestOptions");r[e]=t,n.setOption("globalRequestOptions",r)},n.removeRequestOption=function(e){var t=n.getOption("globalRequestOptions");delete t[e],n.setOption("globalRequestOptions",t)}},interceptors={request:[],response:[],error:[]},intercept=function(e,t){interceptors[e]&&interceptors[e].push(t)},callInterceptorActions=function(e,t,r){var n=interceptors[e]||[];if(0<n.length){var o=!0,i=!1,c=void 0;try{for(var s,u=n[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){(0,s.value)(t,r)}}catch(e){i=!0,c=e}finally{try{o||null==u.return||u.return()}finally{if(i)throw c}}}},initInterceptors=function(e){e.setOption("interceptors",interceptors),e.intercept=intercept},createInterceptorPromise=function(t,e){var r=Promise.resolve();return r=(r=(r=r.then(function(){callInterceptorActions("request",t,e)})).then(function(){return fetch(t,e)})).then(function(e){return callInterceptorActions("response",t,e),e})};function DeliveryGuy(){}initConfig(DeliveryGuy),initRequestOptions(DeliveryGuy),initInterceptors(DeliveryGuy);var getErrorMessage=function(e){return"The request to ".concat(e.url," failed with HTTP ").concat(e.status,": ").concat(e.statusText)},ResponseError=function(e){function r(e){var t;return _classCallCheck(this,r),_defineProperty(_assertThisInitialized(_assertThisInitialized(t=_possibleConstructorReturn(this,_getPrototypeOf(r).call(this,getErrorMessage(e))))),"response",void 0),t.response=e,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(_assertThisInitialized(_assertThisInitialized(t)),r),t}return _inherits(r,_wrapNativeSuper(Error)),r}(),checkResponse=function(e,t){if(!t.ok)throw callInterceptorActions("error",e,t),new ResponseError(t)},deliver=function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var r,n,o,i,c=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=1<c.length&&void 0!==c[1]?c[1]:{},n=deepmerge_1.all([r,getOption("globalRequestOptions")]),o=createInterceptorPromise(t,n),e.next=5,o;case 5:return i=e.sent,checkResponse(t,i),e.abrupt("return",i);case 8:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}(),deliverJson=function(){var r=_asyncToGenerator(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,deliver(t,r);case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}},e,this)}));return function(e,t){return r.apply(this,arguments)}}(),deliverPostJson=function(){var r=_asyncToGenerator(regeneratorRuntime.mark(function e(t,r){var n,o,i,c,s=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=2<s.length&&void 0!==s[2]?s[2]:{},o={method:"POST",body:JSON.stringify(r),headers:{"content-type":"application/json"}},i=deepmerge_1.all([n,o]),e.next=5,deliver(t,i);case 5:return c=e.sent,e.abrupt("return",c.json());case 7:case"end":return e.stop()}},e,this)}));return function(e,t){return r.apply(this,arguments)}}();exports.DeliveryGuy=DeliveryGuy,exports.deliver=deliver,exports.deliverJson=deliverJson,exports.deliverPostJson=deliverPostJson;
