"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},asyncToGenerator=function(e){return function(){var s=e.apply(this,arguments);return new Promise(function(i,c){return function t(e,n){try{var r=s[e](n),o=r.value}catch(e){return void c(e)}if(!r.done)return Promise.resolve(o).then(function(e){t("next",e)},function(e){t("throw",e)});i(o)}("next")})}},classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},inherits=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},possibleConstructorReturn=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},isMergeableObject=function(e){return isNonNullObject(e)&&!isSpecial(e)};function isNonNullObject(e){return!!e&&"object"===(void 0===e?"undefined":_typeof(e))}function isSpecial(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||isReactElement(e)}var canUseSymbol="function"==typeof Symbol&&Symbol.for,REACT_ELEMENT_TYPE=canUseSymbol?Symbol.for("react.element"):60103;function isReactElement(e){return e.$$typeof===REACT_ELEMENT_TYPE}function emptyTarget(e){return Array.isArray(e)?[]:{}}function cloneUnlessOtherwiseSpecified(e,t){return!1!==t.clone&&t.isMergeableObject(e)?deepmerge(emptyTarget(e),e,t):e}function defaultArrayMerge(e,t,n){return e.concat(t).map(function(e){return cloneUnlessOtherwiseSpecified(e,n)})}function mergeObject(t,n,r){var o={};return r.isMergeableObject(t)&&Object.keys(t).forEach(function(e){o[e]=cloneUnlessOtherwiseSpecified(t[e],r)}),Object.keys(n).forEach(function(e){r.isMergeableObject(n[e])&&t[e]?o[e]=deepmerge(t[e],n[e],r):o[e]=cloneUnlessOtherwiseSpecified(n[e],r)}),o}function deepmerge(e,t,n){(n=n||{}).arrayMerge=n.arrayMerge||defaultArrayMerge,n.isMergeableObject=n.isMergeableObject||isMergeableObject;var r=Array.isArray(t);return r===Array.isArray(e)?r?n.arrayMerge(e,t,n):mergeObject(e,t,n):cloneUnlessOtherwiseSpecified(t,n)}deepmerge.all=function(e,n){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(e,t){return deepmerge(e,t,n)},{})};var deepmerge_1=deepmerge,options={globalRequestOptions:{}},getOption=function(e){return options[e]||null},setOption=function(e,t){options[e]=t},initConfig=function(e){e.getOption=getOption,e.setOption=setOption},initRequestOptions=function(r){r.addRequestOption=function(e,t){var n=r.getOption("globalRequestOptions");n[e]=t,r.setOption("globalRequestOptions",n)},r.removeRequestOption=function(e){var t=r.getOption("globalRequestOptions");delete t[e],r.setOption("globalRequestOptions",t)}},interceptors={request:[],response:[],error:[]},intercept=function(e,t){interceptors[e]&&interceptors[e].push(t)},callInterceptorActions=function(e,t,n){var r=interceptors[e]||[];if(0<r.length){var o=!0,i=!1,c=void 0;try{for(var s,u=r[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){(0,s.value)(t,n)}}catch(e){i=!0,c=e}finally{try{!o&&u.return&&u.return()}finally{if(i)throw c}}}},initInterceptors=function(e){e.setOption("interceptors",interceptors),e.intercept=intercept},createInterceptorPromise=function(t,e){var n=Promise.resolve();return n=(n=(n=n.then(function(){callInterceptorActions("request",t,e)})).then(function(){return fetch(t,e)})).then(function(e){return callInterceptorActions("response",t,e),e})};function DeliveryGuy(){}initConfig(DeliveryGuy),initRequestOptions(DeliveryGuy),initInterceptors(DeliveryGuy);var getErrorMessage=function(e){return"The request to "+e.url+" failed with HTTP "+e.status+": "+e.statusText},ResponseError=function(e){function n(e){classCallCheck(this,n);var t=possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,getErrorMessage(e)));return t.response=e,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(t,n),t}return inherits(n,e),n}(Error);Function.prototype.$asyncbind=function e(t,n){function r(){return o.apply(t,arguments)}Function.prototype.$asyncbind||Object.defineProperty(Function.prototype,"$asyncbind",{value:e,enumerable:!1,configurable:!0,writable:!0}),e.trampoline||(e.trampoline=function(n,r,o,i,c){return function e(t){for(;t;){if(t.then)return t=t.then(e,i),c?void 0:t;try{if(t.pop){if(t.length)return t.pop()?r.call(n):t;t=o}else t=t.call(n)}catch(e){return i(e)}}}}),e.LazyThenable||(e.LazyThenable=function(){function o(e){return e&&e instanceof Object&&"function"==typeof e.then}function i(t,e,n){try{var r=n?n(e):e;if(t===r)return t.reject(new TypeError("Promise resolution loop"));o(r)?r.then(function(e){i(t,e)},function(e){t.reject(e)}):t.resolve(r)}catch(e){t.reject(e)}}function e(e){}function c(){}function t(t,n){var r=new c;try{this._resolver(function(e){return o(e)?e.then(t,n):i(r,e,t)},function(e){i(r,e,n)})}catch(e){i(r,e,n)}return r}function n(e){this._resolver=e,this.then=t}return c.prototype={resolve:e,reject:e,then:function(e,t){this.resolve=e,this.reject=t}},n.resolve=function(t){return n.isThenable(t)?t:{then:function(e){return e(t)}}},n.isThenable=o,n}(),e.EagerThenable=e.Thenable=(e.EagerThenableFactory=function(o){o=o||"object"===("undefined"==typeof process?"undefined":_typeof(process))&&process.nextTick||"function"==typeof setImmediate&&setImmediate||function(e){setTimeout(e,0)};var c=function(){var t=[],n=0;function r(){for(;t.length-n;){try{t[n]()}catch(e){}t[n++]=void 0,1024===n&&(t.splice(0,1024),n=0)}}return function(e){t.push(e),t.length-n==1&&o(r)}}();function s(e){if(e){var t=this;e(function(e){t.resolve(e)},function(e){t.reject(e)})}}function i(t,e){if("function"==typeof t.y)try{var n=t.y.call(void 0,e);t.p.resolve(n)}catch(e){t.p.reject(e)}else t.p.resolve(e)}function u(t,e){if("function"==typeof t.n)try{var n=t.n.call(void 0,e);t.p.resolve(n)}catch(e){t.p.reject(e)}else t.p.reject(e)}return s.prototype={resolve:function(n){if(void 0===this.state){if(n===this)return this.reject(new TypeError("Attempt to resolve promise with self"));var r=this;if(n&&("function"==typeof n||"object"===(void 0===n?"undefined":_typeof(n))))try{var t=0,e=n.then;if("function"==typeof e)return void e.call(n,function(e){t++||r.resolve(e)},function(e){t++||r.reject(e)})}catch(e){return void(t||this.reject(e))}this.state=i,this.v=n,r.c&&c(function(){for(var e=0,t=r.c.length;e<t;e++)i(r.c[e],n)})}},reject:function(n){if(void 0===this.state){this.state=u,this.v=n;var r=this.c;r&&c(function(){for(var e=0,t=r.length;e<t;e++)u(r[e],n)})}},then:function(e,t){var n=new s,r={y:e,n:t,p:n};if(void 0===this.state)this.c?this.c.push(r):this.c=[r];else{var o=this.state,i=this.v;c(function(){o(r,i)})}return n}},s.resolve=function(e){if(e&&e instanceof s)return e;var t=new s;return t.resolve(e),t},s.reject=function(e){if(e&&e instanceof s)return e;var t=new s;return t.reject(e),t},s.version="2.3.3-nodent",s})());var o=this;switch(n){case!0:return new e.Thenable(r);case 0:return new e.LazyThenable(r);case void 0:return r.then=r;default:return function(){try{return o.apply(t,arguments)}catch(e){return n(e)}}}};var checkResponse=function(e,t){if(!t.ok)throw callInterceptorActions("error",e,t),new ResponseError(t)},deliver=function(){var t=asyncToGenerator(regeneratorRuntime.mark(function e(t){var n,r,o,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=deepmerge_1.all([i,getOption("globalRequestOptions")]),r=createInterceptorPromise(t,n),e.next=4,r;case 4:return o=e.sent,checkResponse(t,o),e.abrupt("return",o);case 7:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}(),deliverJson=function(){var n=asyncToGenerator(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,deliver(t,n);case 2:return r=e.sent,e.abrupt("return",r.json());case 4:case"end":return e.stop()}},e,this)}));return function(e,t){return n.apply(this,arguments)}}(),deliverPostJson=function(){var n=asyncToGenerator(regeneratorRuntime.mark(function e(t,n){var r,o,i,c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={method:"POST",body:JSON.stringify(n),headers:{"content-type":"application/json"}},o=deepmerge_1.all([c,r]),e.next=4,deliver(t,o);case 4:return i=e.sent,e.abrupt("return",i.json());case 6:case"end":return e.stop()}},e,this)}));return function(e,t){return n.apply(this,arguments)}}();exports.DeliveryGuy=DeliveryGuy,exports.deliver=deliver,exports.deliverJson=deliverJson,exports.deliverPostJson=deliverPostJson;
